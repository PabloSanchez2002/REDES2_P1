<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Practica 1 Redes: wrapper/wrapper.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Practica 1 Redes
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Implementacion de servidor HTTP con use de verbos GET, POST y OPTIONS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5500f3aebf6e66542fc306e8ec4752cc.html">wrapper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">wrapper.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Wrapper for the creation, binding of sockets and more.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="p1_8h_source.html">../inc/p1.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for wrapper.c:</div>
<div class="dyncontent">
<div class="center"><img src="wrapper_8c__incl.png" border="0" usemap="#awrapper_2wrapper_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5ece610682861d1713357ebe3d61997f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wrapper_8c.html#a5ece610682861d1713357ebe3d61997f">createSocket</a> ()</td></tr>
<tr class="memdesc:a5ece610682861d1713357ebe3d61997f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a socket.  <a href="wrapper_8c.html#a5ece610682861d1713357ebe3d61997f">More...</a><br /></td></tr>
<tr class="separator:a5ece610682861d1713357ebe3d61997f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b8e0dc955f61edae5a0b0d79070d886"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wrapper_8c.html#a6b8e0dc955f61edae5a0b0d79070d886">bindSocket</a> (int socketfd, int port)</td></tr>
<tr class="memdesc:a6b8e0dc955f61edae5a0b0d79070d886"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binds the socket to the localip and the port specified in PORT.  <a href="wrapper_8c.html#a6b8e0dc955f61edae5a0b0d79070d886">More...</a><br /></td></tr>
<tr class="separator:a6b8e0dc955f61edae5a0b0d79070d886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3737327eacab5a85035088fc7d46bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wrapper_8c.html#a2b3737327eacab5a85035088fc7d46bd">listenSocket</a> (int socketfd)</td></tr>
<tr class="memdesc:a2b3737327eacab5a85035088fc7d46bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes the socket start listening, up to MAX_LISTENERS at a time.  <a href="wrapper_8c.html#a2b3737327eacab5a85035088fc7d46bd">More...</a><br /></td></tr>
<tr class="separator:a2b3737327eacab5a85035088fc7d46bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c062ca0ac36286f915bacb416dda31c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wrapper_8c.html#a1c062ca0ac36286f915bacb416dda31c">acceptClient</a> (int socketfd)</td></tr>
<tr class="memdesc:a1c062ca0ac36286f915bacb416dda31c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accepts a new client from the listener queue.  <a href="wrapper_8c.html#a1c062ca0ac36286f915bacb416dda31c">More...</a><br /></td></tr>
<tr class="separator:a1c062ca0ac36286f915bacb416dda31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a612199c8b8a992da5187f5c7240b5228"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wrapper_8c.html#a612199c8b8a992da5187f5c7240b5228">connectSocket</a> (int socketfd, int port)</td></tr>
<tr class="memdesc:a612199c8b8a992da5187f5c7240b5228"><td class="mdescLeft">&#160;</td><td class="mdescRight">makes a client connect a socket  <a href="wrapper_8c.html#a612199c8b8a992da5187f5c7240b5228">More...</a><br /></td></tr>
<tr class="separator:a612199c8b8a992da5187f5c7240b5228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2187ece8a5c4263f8b87c10c31be20"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wrapper_8c.html#a3d2187ece8a5c4263f8b87c10c31be20">serverSocket</a> (int flag, int port)</td></tr>
<tr class="memdesc:a3d2187ece8a5c4263f8b87c10c31be20"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function will call up to 4 functions depending on the flag, in order to open a socket, bind it, listen and accept clients. Based on the option flag, the fucntion will create, create and bind, create bind and listen, create bind listen and accept or create and connect. Example: server: serverSocket(ACCEPT) client: serverSocket(CLIENT) with only this 2 calls a connexion between a server and client is made.  <a href="wrapper_8c.html#a3d2187ece8a5c4263f8b87c10c31be20">More...</a><br /></td></tr>
<tr class="separator:a3d2187ece8a5c4263f8b87c10c31be20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1caf54992a9fe7d788bcb255d446bb89"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wrapper_8c.html#a1caf54992a9fe7d788bcb255d446bb89">freeSocket</a> (int *info)</td></tr>
<tr class="memdesc:a1caf54992a9fe7d788bcb255d446bb89"><td class="mdescLeft">&#160;</td><td class="mdescRight">closes the socket file descriptor specified in info[0] and then frees info  <a href="wrapper_8c.html#a1caf54992a9fe7d788bcb255d446bb89">More...</a><br /></td></tr>
<tr class="separator:a1caf54992a9fe7d788bcb255d446bb89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7904fb1e9964c44cc78ac8ce252a99e"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wrapper_8c.html#ac7904fb1e9964c44cc78ac8ce252a99e">initserverSocket</a> (int flag, int port)</td></tr>
<tr class="memdesc:ac7904fb1e9964c44cc78ac8ce252a99e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will call serverSocket and handle the posible errors it can give before returning.  <a href="wrapper_8c.html#ac7904fb1e9964c44cc78ac8ce252a99e">More...</a><br /></td></tr>
<tr class="separator:ac7904fb1e9964c44cc78ac8ce252a99e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrapper for the creation, binding of sockets and more. </p>
<dl class="section author"><dt>Author</dt><dd>Álvaro Rodríguez &amp; Pablo Sanchez </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-02-16</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1c062ca0ac36286f915bacb416dda31c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c062ca0ac36286f915bacb416dda31c">&#9670;&nbsp;</a></span>acceptClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int acceptClient </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socketfd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accepts a new client from the listener queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socketfd</td><td>the file descriptor of the socket where we listening </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the file descriptor of the client or ERROR </dd></dl>

</div>
</div>
<a id="a6b8e0dc955f61edae5a0b0d79070d886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b8e0dc955f61edae5a0b0d79070d886">&#9670;&nbsp;</a></span>bindSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bindSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socketfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Binds the socket to the localip and the port specified in PORT. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socketfd</td><td>file descriptor of the socket to bind </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK or ERROR </dd></dl>

</div>
</div>
<a id="a612199c8b8a992da5187f5c7240b5228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a612199c8b8a992da5187f5c7240b5228">&#9670;&nbsp;</a></span>connectSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int connectSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socketfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>makes a client connect a socket </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socketfd</td><td>the socket where he will connect </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK or ERROR </dd></dl>

</div>
</div>
<a id="a5ece610682861d1713357ebe3d61997f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ece610682861d1713357ebe3d61997f">&#9670;&nbsp;</a></span>createSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int createSocket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a socket. </p>
<dl class="section return"><dt>Returns</dt><dd>socket file descriptor if everything went ok, BASIC_ERROR if not. </dd></dl>

</div>
</div>
<a id="a1caf54992a9fe7d788bcb255d446bb89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1caf54992a9fe7d788bcb255d446bb89">&#9670;&nbsp;</a></span>freeSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int freeSocket </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>closes the socket file descriptor specified in info[0] and then frees info </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK or ERROR </dd></dl>

</div>
</div>
<a id="ac7904fb1e9964c44cc78ac8ce252a99e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7904fb1e9964c44cc78ac8ce252a99e">&#9670;&nbsp;</a></span>initserverSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* initserverSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will call serverSocket and handle the posible errors it can give before returning. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>The value of flag is specified in <a class="el" href="p1_8h.html">p1.h</a> (CLIENT, CREATE, BIND, LISTEN, ACCEPT) -&gt; (1,2,3,4,5) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL if error or the file descriptors correctly opened </dd></dl>

</div>
</div>
<a id="a2b3737327eacab5a85035088fc7d46bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b3737327eacab5a85035088fc7d46bd">&#9670;&nbsp;</a></span>listenSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int listenSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socketfd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes the socket start listening, up to MAX_LISTENERS at a time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socketfd</td><td>file descriptor of the socket to listen </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK or ERROR </dd></dl>

</div>
</div>
<a id="a3d2187ece8a5c4263f8b87c10c31be20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d2187ece8a5c4263f8b87c10c31be20">&#9670;&nbsp;</a></span>serverSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* serverSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this function will call up to 4 functions depending on the flag, in order to open a socket, bind it, listen and accept clients. Based on the option flag, the fucntion will create, create and bind, create bind and listen, create bind listen and accept or create and connect. Example: server: serverSocket(ACCEPT) client: serverSocket(CLIENT) with only this 2 calls a connexion between a server and client is made. </p>
<p>If we just wanted to bind we would call: serverSocket(BIND) --&gt; this will create the socket and bind it to our ip.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>The value of flag is specified in <a class="el" href="p1_8h.html">p1.h</a> (CLIENT, CREATE, BIND, LISTEN, ACCEPT) -&gt; (1,2,3,4,5) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an array with two values: if NULL -&gt; there was an error allocating memory. Else, the errors are stored in ret[1], and they depend on the function that gave error flags are specified in <a class="el" href="p1_8h.html">p1.h</a> (CREATESOCKETERR, BINDSOCKETERR, LISTENSOCKETERR, ACCEPTSOCKETERR, CONNECTSOCKETERR) -&gt;(-2, -3, -4, -5, -6) If everything went okey it will store: ret[0] = our socketfd, ret[1] = client socket fd. If flag is for example BIND -&gt; Accept isnt called, then ret[1] will have a 0 value. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
